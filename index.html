<!DOCTYPE html>
<html>
<head>
	<title>Test</title>
	<script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<style>
	p, h3, button, input{
		padding: 5px;
		margin: 10px;
		text-decoration: none;
	}
	body{
		font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
		 
	}
</style>

<body>
	<h3>Compare Similarity between two sentences</h3>
	<p>Service Used: <a href="https://labs.cognitive.microsoft.com/en-us/project-academic-knowledge" target="_blank">MS Academic Search API</a></p>
	<form id="testForm">
		<input type="text" action="" name="sentence" method = 'POST' id="sent1" size="100"><br>
		<input type="text" action="" name="sentence" method = 'POST' id="sent2" size="100"><br>
		<button id="analyseButton" type="submit">Compare</button>
	</form>	
	
	<p id ="sent"></p>
	<script type="text/javascript">
		var similarity='';
		var sent='';
		var sent1='';
		var sent2='';
		
		$('#testForm').submit(function (e) {
			e.preventDefault();
			document.getElementById('sent').innerHTML='';
			sendapi();			
			return false;
		});
		
		function sendapi() {
			sent = document.getElementById('testForm');
			sent1 = sent.elements[0].value;
			sent2 = sent.elements[1].value;
			console.log(sent1);
			console.log(sent2);
			var params = {
				// Request parameters
				"s1": sent1,
				"s2": sent2,
			};
			$.ajax({
				url: "https://api.labs.cognitive.microsoft.com/academic/v1.0/similarity?" + $.param(params),
				beforeSend: function(xhrObj){
					// Request headers
					xhrObj.setRequestHeader("Ocp-Apim-Subscription-Key","c52d3449c96d4140bb0a02438a206138");
				},
				type: "GET",
			})
			.done(function (data) {
				var confidence=0;
				var result = "";
				debugger
				if(data<0){
					confidence = (data * -100).toFixed(2);
					result = "<strong>Not Similar</strong>, Confidence: "+confidence.toString()+"%"; 
				}
				else{
					confidence = (data * 100).toFixed(2);
					result = "<strong>Similar</strong>, Confidence: "+confidence.toString()+"%";
				}
				console.log(result);
				document.getElementById('sent').innerHTML=result;
			})
			.fail(function (data) {
				//debugger
			});
		}
		
	</script>
</body>
</html>
